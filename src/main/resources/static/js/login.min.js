$(function(){var a=null;AJAX({url:projectName+"/api/getPublicKey",sync:true,success:function(b){if(strEquals(b.code,200)){a=b.resultData}else{a=null;swal("错误提示",b.msg,"error")}}});if($.cookie("ischeck")){if($.cookie("urd")==""||$.cookie("psd")==""){swal({title:"提示！",text:"登录时间已过期，请重新输入密码登录！",timer:2000}).then(function(){},function(b){if(b==="timer"){}})}else{$("form input[name='username']").val($.cookie("urd"));AJAX({url:projectName+"/api/rememberMe",sync:false,success:function(b){if(strEquals(b.code,200)){if(!strIsEmpty(b.resultData.psd)){$("form input[name='rememberMe']").attr("checked",true);$(".icheckbox_square-green").addClass("checked");$("form input[name='password']").val(b.resultData.psd)}else{$("form input[name='rememberMe']").attr("checked",false);$(".icheckbox_square-green").removeClass("checked");$("form input[name='password']").val("")}}}})}}else{$("form input[name='rememberMe']").attr("checked",false);$(".icheckbox_square-green").removeClass("checked")}$("form").submit(function(d){d.preventDefault();var h=$.trim($("form input[name='username']").val());var b=$.trim($("form input[name='password']").val());var g=$("form input[name='rememberMe']").is(":checked");if(strIsEmpty(h)){return}if(!(strEquals(h,"admin")||strEquals(h,"hx"))&&!isMailAvailable(h)){return}if(strIsEmpty(b)){return}if(strIsEmpty(a)){swal("错误提示","系统异常！","error")}var f=new JSEncrypt();f.setPublicKey(a);var c=f.encrypt(b);var e=$(this);AJAX({url:projectName+"/api/login",sync:false,type:e.attr("method"),data:{username:h,password:encodeURI(c).replace(/\+/g,"%2B"),rememberMe:g},success:function(i){if(strEquals(i.code,200)){window.location.href=projectName+"/index"}else{swal("错误提示",i.msg,"error")}}})})});